---
title: "Regression Discontinuity"
---

```{r}
options(repos = c(CRAN = "https://cloud.r-project.org"))

install.packages("rddensity")

library(rddensity)

data <- readRDS("C:/Users/Anjali/Downloads/Causal_Data_Science_Data (1)/Causal_Data_Science_Data/coupon.rds")

# Convert data to a data frame
data_frame <- as.data.frame(data)

# Assuming your response variable is 'purchase_after' and 'days_since_last' is the running variable
response_variable <- "purchase_after"
running_variable <- "days_since_last"
# Original analysis with default bandwidth
original_rdd_result <- rdd(data_frame[[response_variable]] ~ data_frame[[running_variable]], c = 60)

# Access the bandwidth from the original result
original_bw <- bandwidth(original_rdd_result)

# Analysis with half the bandwidth
half_bw <- original_bw / 2
half_bandwidth_result <- rddensity(original_rdd_result, h = half_bw)

# Analysis with double the bandwidth
double_bw <- original_bw * 2
double_bandwidth_result <- rddensity(original_rdd_result, h = double_bw)

# Print results
print("Original RDD Analysis:")
print(original_rdd_result)
print("Density Estimation with Half Bandwidth:")
print(half_bandwidth_result)
print("Density Estimation with Double Bandwidth:")
print(double_bandwidth_result)
```
```{r}

# Load necessary libraries and data
library(ggplot2)
library(foreign)  

shipping_data <- readRDS("C:/Users/Anjali/Downloads/Causal_Data_Science_Data (1)/Causal_Data_Science_Data/shipping.rds")

# Check the structure of your data
str(shipping_data)

# Check the structure of your data
str(shipping_data)

# Create a histogram of purchase amounts
ggplot(shipping_data, aes(x = purchase_amount)) +
  geom_histogram(binwidth = 5, fill = "blue", color = "black", alpha = 0.7) +
  labs(title = "Distribution of Purchase Amounts",
       x = "Purchase Amount",
       y = "Frequency") +
  theme_minimal()

```

