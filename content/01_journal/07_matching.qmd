---
title: "Matching and Subclassification"
---

```{r}
data <- readRDS("C:/Users/Anjali/Downloads/Causal_Data_Science_Data (1)/Causal_Data_Science_Data/membership.rds")

# Install and load the 'dagitty' package
library(dagitty)

# Create a DAG
dag <- dagitty("dag {
  age -> avg_purch
  sex -> avg_purch
  pre_avg_purch -> avg_purch
  card -> avg_purch
}")

# Plot the DAG
plot(dag)

```
```{r}
#2

# Calculate average purchase for customers with plus membership
avg_purchase_treatment <- mean(data$avg_purch[data$card == 1], na.rm = TRUE)

# Calculate average purchase for customers without plus membership
avg_purchase_control <- mean(data$avg_purch[data$card == 0], na.rm = TRUE)

# Compute the naive estimate of the average treatment effect
naive_ate <- avg_purchase_treatment - avg_purchase_control

# Print or use the naive_ate value
cat("Naive Estimate of ATE:", naive_ate, "\n")

```





