{
  "hash": "d10a6e5dad917e7d7dc3f3590c39b6a7",
  "result": {
    "markdown": "---\ntitle: \"Instrumental Variables\"\n---\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-1_037fd1ef763d9570fd0b0832a3b72cd0'}\n\n```{.r .cell-code}\n#1\ndata <- readRDS(\"C:/Users/Anjali/Downloads/Causal_Data_Science_Data (1)/Causal_Data_Science_Data/rand_enc.rds\")\n\n#library(dagitty)\n\n# Define the DAG\n#dag <- dagitty('\n#  dag {\n#    rand_enc [pos=\"0,0\"]\n#    used_ftr [pos=\"1,0\"]\n#    time_spent [pos=\"2,0\"]\n #   \n  #  # Edges\n   # rand_enc -> used_ftr\n    #rand_enc -> time_spent\n    #used_ftr -> time_spent\n  #}\n#')\n\n\n#plot(dag)\n```\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-2_1968f2cd1327fc75cc9bfe9197607d9a'}\n\n```{.r .cell-code}\n#2\n\nnaive_estimate <- tapply(data$time_spent, data$rand_enc, mean)\n\n# Print the results\ncat(\"Naive Estimate for Encouraged Users:\", naive_estimate[2], \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Naive Estimate for Encouraged Users: 24.25068\n```\n:::\n\n```{.r .cell-code}\ncat(\"Naive Estimate for Not Encouraged Users:\", naive_estimate[1], \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Naive Estimate for Not Encouraged Users: 22.29389\n```\n:::\n\n```{.r .cell-code}\n# Assuming your data frame is named 'df'\nmodel <- lm(time_spent ~ rand_enc + used_ftr, data = data)\n\n# Extract coefficients\ncoefficients <- coef(model)\n\n# Print the results\ncat(\"Biased Estimate for Encouraged Users:\", coefficients[\"rand_enc\"], \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Biased Estimate for Encouraged Users: -0.2274239\n```\n:::\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-3_1dd2ec6d86bc3e8ec487b60f9366c3de'}\n\n```{.r .cell-code}\n#3\n\ncorrelation_instrument1_endogenous <- cor(data$rand_enc, data$time_spent)\ncorrelation_instrument2_endogenous <- cor(data$used_ftr, data$time_spent)\n\nmodel_endogenous <- lm(time_spent ~ rand_enc + used_ftr, data = data)\nresiduals <- residuals(model_endogenous)\n\ncorrelation_instrument1_residuals <- cor(data$rand_enc, residuals)\ncorrelation_instrument2_residuals <- cor(data$used_ftr, residuals)\n\ncorrelation_endogenous_dependent <- cor(data$time_spent, data$time_spent)\n\n# Print the results\ncat(\"Correlation between instrument1 and endogenous variable:\", correlation_instrument1_endogenous, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Correlation between instrument1 and endogenous variable: 0.1296716\n```\n:::\n\n```{.r .cell-code}\ncat(\"Correlation between instrument2 and endogenous variable:\", correlation_instrument2_endogenous, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Correlation between instrument2 and endogenous variable: 0.7050147\n```\n:::\n\n```{.r .cell-code}\ncat(\"Correlation between instrument1 and residuals:\", correlation_instrument1_residuals, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Correlation between instrument1 and residuals: -1.207024e-16\n```\n:::\n\n```{.r .cell-code}\ncat(\"Correlation between instrument2 and residuals:\", correlation_instrument2_residuals, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Correlation between instrument2 and residuals: 9.569848e-17\n```\n:::\n\n```{.r .cell-code}\ncat(\"Correlation between endogenous variable and dependent variable:\", correlation_endogenous_dependent, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> Correlation between endogenous variable and dependent variable: 1\n```\n:::\n:::\n\n::: {.cell hash='09_iv_cache/html/unnamed-chunk-4_e639684b50172c8eed5fad5812ec0439'}\n\n```{.r .cell-code}\n#4\n\n# Load the ivreg library\nlibrary(ivreg)\n\n# IV estimate using 2SLS\niv_model <- ivreg(time_spent ~ used_ftr | rand_enc, data = data)\niv_estimate <- coef(iv_model)[\"used_ftr\"]\n\n# Print the results\ncat(\"IV Estimate (2SLS):\", iv_estimate, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> IV Estimate (2SLS): 9.738175\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}